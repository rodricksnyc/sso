"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useLabelWidth = exports.MIN_LABEL_SPACE = void 0;

require("core-js/modules/es.array.map.js");

require("core-js/modules/es.object.entries.js");

require("core-js/modules/es.array.iterator.js");

var _react = require("react");

var _visualizationsAdapters = require("@looker/visualizations-adapters");

var _styledComponents = require("styled-components");

var _getLabelContent = require("./getLabelContent");

const MIN_LABEL_SPACE = 90;
exports.MIN_LABEL_SPACE = MIN_LABEL_SPACE;

const useLabelWidth = (measureTotal, keyValData, legend) => {
  const _ref = legend || {},
        _ref$type = _ref.type,
        legendType = _ref$type === void 0 ? 'legend' : _ref$type;

  const theme = (0, _react.useContext)(_styledComponents.ThemeContext);
  const longestLabel = (0, _visualizationsAdapters.pickLongestLabel)(Object.entries(keyValData).map(([key, val]) => {
    return (0, _getLabelContent.getLabelContent)(measureTotal, {
      [key]: val
    }, legend);
  }));

  const _useMeasuredText = (0, _visualizationsAdapters.useMeasuredText)(longestLabel, {
    fontSize: legendType === 'legend' ? theme.fontSizes.medium : theme.fontSizes.xsmall,
    fontFamily: theme.fonts.body
  }),
        labelWidth = _useMeasuredText.width;

  return Math.max(labelWidth + 20, MIN_LABEL_SPACE);
};

exports.useLabelWidth = useLabelWidth;
//# sourceMappingURL=useLabelWidth.js.map