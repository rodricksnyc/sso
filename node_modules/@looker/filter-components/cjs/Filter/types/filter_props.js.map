{"version":3,"file":"filter_props.js","names":[],"sources":["../../../../src/Filter/types/filter_props.ts"],"sourcesContent":["/*\n\n MIT License\n\n Copyright (c) 2022 Looker Data Sciences, Inc.\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n\n */\nimport type {\n  FilterExpressionType,\n  UserAttributeWithValue,\n  FilterASTNode,\n  FilterModel,\n} from '@looker/filter-expressions'\nimport type { ILookmlModelExploreField } from '@looker/sdk'\nimport type { Option } from './option'\nimport type { ValidationMessageProps } from '@looker/components'\n\nexport interface FilterChangeProps {\n  expression: string\n}\n\ntype ExpressionTypeProps = {\n  /**\n   * The type of the expression. Required if field is not provided.\n   * Will be derived from field and type if absent.\n   */\n  expressionType: FilterExpressionType\n}\ntype FieldProps = {\n  /**\n   * The field associated with the filter.\n   * Required if expressionType is not provided.\n   */\n  field: ILookmlModelExploreField | null\n}\ntype TypeProps = {\n  /**\n   * The type on the DashboardFilter, e.g. field_filter,\n   * used to derive expressionType if that is not provided\n   */\n  type: string\n}\n\n// Use a union to get \"either / or\" required\n// Use an intersection + Partial to make them both also optional\n// Combined result is \"at least one of\"\ntype ExpressionTypeOrFieldProps = (\n  | ExpressionTypeProps\n  | FieldProps\n  | TypeProps\n) &\n  (Partial<ExpressionTypeProps> & Partial<FieldProps> & Partial<TypeProps>)\n\n/**\n * Interface for the <Filter/> component's props property.\n * Requires at least one of: expressionType, field, type\n */\nexport type FilterProps = ExpressionTypeOrFieldProps & {\n  /**\n   * The UI config that determines how a control filter will render and behave\n   */\n  config?: any\n  /**\n   * The current value of the filter.\n   * See {@link https://docs.looker.com/reference/filter-expressions Looker Filter Expressions}.\n   */\n  expression: string\n  /**\n   * Used to generate unique key for multi-condition advanced filters\n   */\n  name: string\n  /**\n   * Flag for filters where suggestions are link to another filter\n   */\n  isLinked?: boolean\n  /**\n   * Suggestions are currently loading\n   */\n  isLoading?: boolean\n  /**\n   * Filter will render error styling if this is true and expression is empty\n   */\n  isRequired?: boolean\n  /**\n   * Render filter horizontally (applies to checkboxes and radio buttons)\n   */\n  inline?: boolean\n  /**\n   * Called when the filter expression is changed\n   */\n  onChange?: (value: FilterChangeProps) => void\n  /**\n   * Called in the event that user is typing in a suggestable filter, but the results\n   * are at the front-end limit of 999, so filtering must be done in the API\n   */\n  onInputChange?: (value: string) => void\n  /**\n   * Called when user attributes are needed in the filter\n   */\n  loadUserAttributes?: () => void\n  /**\n   * Can be initially empty – loadUserAttributes will be called when they are needed\n   */\n  userAttributes?: UserAttributeWithValue[]\n  /**\n   * Suggestions for the filter – see useSuggestable hook for fetching suggestions via the API\n   */\n  suggestions?: string[]\n  /**\n   * Enumerations for the filter\n   */\n  enumerations?: Option[] | null\n  /**\n   * Used to initialize filters in Edit Mode – do not use if filter is not editable\n   */\n  dispatchConfigTypeChange?: boolean\n  /**\n   * Skip checking if expression can be rendered by filter control\n   */\n  skipFilterConfigCheck?: boolean\n  /**\n   * Allow multiple values to filter by\n   */\n  allowMultipleValues?: boolean\n}\n\n/**\n * Interface for <InternalFilter /> and <InternalFilterAdvanced />\n */\nexport interface InternalFilterProps\n  extends Omit<\n    FilterProps,\n    'type' | 'expressionType' | 'expression' | 'loadUserAttributes' | 'onChange'\n  > {\n  expressionType: FilterExpressionType\n  ast: FilterASTNode | undefined\n  changeFilter: (id: number, newItem: FilterModel) => void\n  validationMessage: ValidationMessageProps\n}\n"],"mappings":""}