{"version":3,"file":"Select.spec.js","names":["options100","Array","from","_","i","value","String","beforeEach","jest","useFakeTimers","afterEach","runOnlyPendingTimers","useRealTimers","runTimers","act","describe","test","renderWithTheme","label","fireEvent","click","screen","getByPlaceholderText","select","getByText","closest","expect","not","toHaveClass","toHaveStyle","focus","mouseDown","mouseUp","blur","document","options","each","onChange","name","getJSX","handleChange","fn","queryByText","toBeInTheDocument","input","toBeVisible","bar","toHaveBeenCalledTimes","onChangeArg","toHaveBeenCalledWith","initialOptions","onFilter","optionsToUse","mockOnFilter","Component","useState","setOptions","handleFilter","term","filter","option","indexOf","getAllByRole","toHaveLength","change","target","items","toHaveAttribute","fireArrowDown","keyDown","key","id","groupedOptions","description","foo","other","desc","dimensions","maxHeight","maxWidth","minWidth","width","jsx","list","getByRole","toHaveStyleRule","GetIndicatorJSX","listLevel","indicator","map","opt","undefined","GetIndicatorJSXMulti","toHaveBeenNthCalledWith","isActive","isSelected","check","queryByTitle","mockClear","detailOptions","detail","noOptions","toHaveBeenCalled","spinner","queryByLabelText","testArray","longOptions","index","slice","inputs","length","rafSpy","spyOn","window","mockImplementation","cb","surface","surfaceInner","firstChild","surfaceInnerFlex","scroll","mouseOver","queryByRole","selected","toHaveTextContent","mockRestore","commonProps","isFilterable","placeholder","showCreate","formatCreateLabel","inputValue","values","setValue","tempValue","setTempValue","useEffect","t","setTimeout","clearTimeout","relatedTarget","toHaveFocus","globalConsole","global","console","warnMock","warn","resetAllMocks","toHaveValue","getByDisplayValue","button","clearButton","getByTestId","querySelector","setLabel","getAllComboboxOptionText","toMatchInlineSnapshot","filterTerm","setFilterTerm","filteredOptions","useMemo","icon","queryByTestId","getAllByTestId","inputIcon","tagName","toBe","mock","calls","preface","fooPreface","barPreface","parentElement","toHaveDisplayValue","customLabelOptions","TestComponent"],"sources":["../../../../../src/Form/Inputs/Select/Select.spec.tsx"],"sourcesContent":["/*\n\n MIT License\n\n Copyright (c) 2022 Looker Data Sciences, Inc.\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n\n */\n\nimport {\n  getAllComboboxOptionText,\n  renderWithTheme,\n} from '@looker/components-test-utils'\nimport { AutoGraph, BarChart } from '@styled-icons/material'\nimport { act, fireEvent, screen } from '@testing-library/react'\nimport React, { useState, useMemo, useEffect } from 'react'\n\nimport { Button } from '../../../Button'\nimport type { ComboboxOptionIndicatorFunction } from '../Combobox'\nimport { Select } from './Select'\nimport { SelectMulti } from './SelectMulti'\nimport type { SelectOptionProps } from './types'\n\nconst options100 = Array.from(Array(100), (_, i) => ({\n  value: String(i + 1),\n}))\n\nbeforeEach(() => {\n  jest.useFakeTimers()\n})\n\nafterEach(() => {\n  jest.runOnlyPendingTimers()\n  jest.useRealTimers()\n})\n\nconst runTimers = () =>\n  act(() => {\n    jest.runOnlyPendingTimers()\n  })\n\ndescribe('Select / SelectMulti', () => {\n  test('ripple effect', () => {\n    renderWithTheme(\n      <Select\n        options={[\n          { label: 'Cheddar', value: 'cheddar' },\n          { label: 'Gouda', value: 'gouda' },\n          { label: 'Swiss', value: 'swiss' },\n        ]}\n        placeholder=\"Select\"\n      ></Select>\n    )\n\n    fireEvent.click(screen.getByPlaceholderText('Select'))\n\n    const select = screen.getByText('Cheddar').closest('li')\n    expect(select).not.toHaveClass('bg-on fg-in')\n    expect(select).toHaveStyle({\n      '--ripple-color': '#71767a',\n      '--ripple-scale-end': '1',\n      '--ripple-scale-start': '0.1',\n      '--ripple-size': '100%',\n      '--ripple-translate': '0, 0',\n    })\n\n    select && fireEvent.focus(select)\n    expect(select).toHaveClass('bg-on')\n\n    select && fireEvent.mouseDown(select)\n    expect(select).toHaveClass('bg-on fg-in')\n\n    // foreground is locked for a minimum time to animate the ripple\n    select && fireEvent.mouseUp(select)\n    runTimers()\n    expect(select).toHaveClass('bg-on fg-out')\n    runTimers()\n    expect(select).toHaveClass('bg-on')\n\n    select && fireEvent.blur(select)\n    expect(select).not.toHaveClass('bg-on fg-in')\n    fireEvent.click(document)\n  })\n\n  const options = [{ value: 'FOO' }, { value: 'BAR' }]\n\n  test.each([\n    [\n      'Select',\n      (onChange: () => void) => (\n        <Select\n          options={options}\n          placeholder=\"Search\"\n          onChange={onChange}\n          key=\"select\"\n        />\n      ),\n    ],\n    [\n      'SelectMulti',\n      (onChange: () => void) => (\n        <SelectMulti\n          options={options}\n          placeholder=\"Search\"\n          onChange={onChange}\n          key=\"select-multi\"\n        />\n      ),\n    ],\n  ])('with options and handleChange (%s)', (name, getJSX) => {\n    const handleChange = jest.fn()\n    renderWithTheme(getJSX(handleChange))\n    expect(screen.queryByText('FOO')).not.toBeInTheDocument()\n    expect(screen.queryByText('BAR')).not.toBeInTheDocument()\n\n    const input = screen.getByPlaceholderText('Search')\n    expect(input).toBeVisible()\n\n    fireEvent.mouseDown(input)\n\n    // const foo = screen.getByText('FOO')\n    const bar = screen.getByText('BAR')\n\n    // Clicking on the options should fire onBlur on the input and\n    // trigger the state transition that allows in an updated input value.\n    // It doesn't, and the following doesn't work to fake it, so we can't test input value.\n    // act(() => {\n    // getAllByRole('option')[0].focus()\n    // input.blur()\n    // })\n    fireEvent.click(bar)\n    // fireEvent.click(foo)\n\n    expect(handleChange).toHaveBeenCalledTimes(1)\n    // expect(handleChange).toHaveBeenCalledWith({ value: 'FOO' })\n    const onChangeArg = name === 'SelectMulti' ? ['BAR'] : 'BAR'\n    expect(handleChange).toHaveBeenCalledWith(onChangeArg)\n\n    // Close popover to silence act() warning\n    fireEvent.click(document)\n  })\n\n  // Test long list of options to capture the windowed options issue\n  const initialOptions = [...options100, ...options, { value: 'BAZ' }]\n\n  test.each([\n    [\n      'Select',\n      (onFilter: (term: string) => void, optionsToUse: SelectOptionProps[]) => (\n        <Select\n          options={optionsToUse}\n          placeholder=\"Search\"\n          onFilter={onFilter}\n          key=\"select\"\n        />\n      ),\n    ],\n    [\n      'SelectMulti',\n      (onFilter: (term: string) => void, optionsToUse: SelectOptionProps[]) => (\n        <SelectMulti\n          options={optionsToUse}\n          placeholder=\"Search\"\n          onFilter={onFilter}\n          key=\"select-multi\"\n        />\n      ),\n    ],\n  ])('with onFilter (%s)', (_, getJSX) => {\n    const mockOnFilter = jest.fn()\n\n    function Component() {\n      const [optionsToUse, setOptions] = useState(initialOptions)\n      function handleFilter(term: string) {\n        mockOnFilter(term)\n        setOptions(\n          initialOptions.filter(option => option.value.indexOf(term) > -1)\n        )\n      }\n\n      return getJSX(handleFilter, optionsToUse)\n    }\n\n    renderWithTheme(<Component />)\n    const input = screen.getByPlaceholderText('Search')\n    fireEvent.mouseDown(input)\n    // Only 6 options are rendered since jsdom gives the list a height of 0px\n    expect(screen.getAllByRole('option')).toHaveLength(6)\n    expect(screen.getByText('1')).toBeInTheDocument()\n    expect(screen.getByText('6')).toBeInTheDocument()\n\n    fireEvent.change(input, { target: { value: 'BA' } })\n    expect(mockOnFilter).toHaveBeenCalledWith('BA')\n\n    // Verify keyboard nav hasn't been messed up by updating options\n    const items = screen.getAllByRole('option')\n    expect(items).toHaveLength(2)\n    expect(items[0]).toHaveAttribute('aria-selected', 'false')\n    expect(items[1]).toHaveAttribute('aria-selected', 'false')\n\n    const fireArrowDown = () => fireEvent.keyDown(input, { key: 'ArrowDown' })\n    fireArrowDown()\n    expect(items[0]).toHaveAttribute('aria-selected', 'true')\n    expect(items[1]).toHaveAttribute('aria-selected', 'false')\n    expect(input).toHaveAttribute('aria-activedescendant', items[0].id)\n\n    fireArrowDown()\n    expect(items[0]).toHaveAttribute('aria-selected', 'false')\n    expect(items[1]).toHaveAttribute('aria-selected', 'true')\n    expect(input).toHaveAttribute('aria-activedescendant', items[1].id)\n\n    // Back to the top\n    fireArrowDown()\n    expect(items[0]).toHaveAttribute('aria-selected', 'true')\n    expect(items[1]).toHaveAttribute('aria-selected', 'false')\n    expect(input).toHaveAttribute('aria-activedescendant', items[0].id)\n\n    // Close popover to silence act() warning\n    fireEvent.click(document)\n  })\n\n  const groupedOptions = [\n    {\n      label: 'FOO',\n      options: [{ value: 'BAR' }, { value: 'BAZ' }],\n    },\n    {\n      label: 'OTHER',\n      options: [\n        { description: 'A description for something', value: 'something' },\n      ],\n    },\n    // label is not required\n    {\n      options: [{ value: 'QUX' }, { value: 'TEST' }],\n    },\n  ]\n\n  test.each([\n    [\n      'Select',\n      (onChange: () => void) => (\n        <Select\n          options={groupedOptions}\n          placeholder=\"Search\"\n          onChange={onChange}\n          key=\"select\"\n        />\n      ),\n    ],\n    [\n      'SelectMulti',\n      (onChange: () => void) => (\n        <SelectMulti\n          options={groupedOptions}\n          placeholder=\"Search\"\n          onChange={onChange}\n          key=\"select-multi\"\n        />\n      ),\n    ],\n  ])('with option descriptions and group labels (%s)', (name, getJSX) => {\n    const handleChange = jest.fn()\n    renderWithTheme(getJSX(handleChange))\n\n    const input = screen.getByPlaceholderText('Search')\n    expect(input).toBeVisible()\n\n    fireEvent.mouseDown(input)\n\n    const foo = screen.getByText('FOO')\n    const other = screen.getByText('OTHER')\n    const desc = screen.getByText('A description for something')\n\n    expect(foo).toBeInTheDocument()\n    expect(other).toBeInTheDocument()\n    expect(desc).toBeInTheDocument()\n\n    // A click on a title shouldn't do anything\n    fireEvent.click(foo)\n    // Description is part of the option so the click triggers change\n    fireEvent.click(desc)\n\n    expect(handleChange).toHaveBeenCalledTimes(1)\n\n    const onChangeArg = name === 'SelectMulti' ? ['something'] : 'something'\n    expect(handleChange).toHaveBeenCalledWith(onChangeArg)\n\n    // Close popover to silence act() warning\n    fireEvent.click(document)\n  })\n\n  const dimensions = {\n    maxHeight: 400,\n    maxWidth: 800,\n    minWidth: 300,\n    width: '50vw',\n  }\n\n  test.each([\n    [\n      'Select',\n      <Select\n        options={groupedOptions}\n        placeholder=\"Search\"\n        listLayout={dimensions}\n        key=\"select\"\n      />,\n    ],\n    [\n      'SelectMulti',\n      <SelectMulti\n        options={groupedOptions}\n        placeholder=\"Search\"\n        listLayout={dimensions}\n        key=\"select-multi\"\n      />,\n    ],\n  ])('with listLayout (%s)', (_, jsx) => {\n    renderWithTheme(jsx)\n\n    const input = screen.getByPlaceholderText('Search')\n    expect(input).toBeVisible()\n\n    fireEvent.mouseDown(input)\n\n    const list = screen.getByRole('listbox')\n    expect(list).toHaveStyleRule('max-height', '400px')\n    expect(list).toHaveStyleRule('max-width', '800px')\n    expect(list).toHaveStyleRule('min-width', '300px')\n    expect(list).toHaveStyleRule('width', '50vw')\n\n    // Close popover to silence act() warning\n    fireEvent.click(document)\n  })\n\n  /* eslint-disable react/display-name */\n  const GetIndicatorJSX = (listLevel: boolean) => (\n    indicator: ComboboxOptionIndicatorFunction\n  ) => (\n    <Select\n      options={options.map(opt => ({\n        ...opt,\n        ...(listLevel ? {} : { indicator }),\n      }))}\n      value=\"FOO\"\n      placeholder=\"Search\"\n      indicator={listLevel ? indicator : undefined}\n      key=\"select\"\n    />\n  )\n\n  const GetIndicatorJSXMulti = (listLevel: boolean) => (\n    indicator: ComboboxOptionIndicatorFunction\n  ) => (\n    <SelectMulti\n      options={options.map(opt => ({\n        ...opt,\n        ...(listLevel ? {} : { indicator }),\n      }))}\n      values={['FOO']}\n      placeholder=\"Search\"\n      indicator={listLevel ? indicator : undefined}\n      key=\"select-multi\"\n    />\n  )\n  /* eslint-enable react/display-name */\n\n  test.each([\n    ['list level (Select)', GetIndicatorJSX(true)],\n    ['list level (SelectMulti)', GetIndicatorJSXMulti(true)],\n    ['option level (Select)', GetIndicatorJSX(false)],\n    ['option level (SelectMulti)', GetIndicatorJSXMulti(false)],\n  ])('Customize the indicator at the %s', (_, getJSX) => {\n    const indicator = jest.fn()\n    renderWithTheme(getJSX(indicator))\n\n    const input = screen.getByPlaceholderText('Search')\n    fireEvent.click(input)\n\n    expect(indicator).toHaveBeenCalledTimes(2)\n    expect(indicator).toHaveBeenNthCalledWith(1, {\n      // ComboboxList.persistSelection is true for Select/SelectMulti\n      isActive: true,\n      isSelected: true,\n      label: undefined,\n      value: 'FOO',\n    })\n    expect(indicator).toHaveBeenNthCalledWith(2, {\n      isActive: false,\n      isSelected: false,\n      label: undefined,\n      value: 'BAR',\n    })\n\n    const check = screen.queryByTitle('Check')\n    expect(check).not.toBeInTheDocument()\n\n    indicator.mockClear()\n\n    const bar = screen.getByText('BAR')\n    fireEvent.keyDown(bar, {\n      key: 'ArrowDown',\n    })\n\n    expect(indicator).toHaveBeenCalledTimes(2)\n    expect(indicator).toHaveBeenNthCalledWith(1, {\n      // ComboboxList.persistSelection is true for Select/SelectMulti\n      isActive: false,\n      isSelected: true,\n      label: undefined,\n      value: 'FOO',\n    })\n    expect(indicator).toHaveBeenNthCalledWith(2, {\n      isActive: true,\n      isSelected: false,\n      label: undefined,\n      value: 'BAR',\n    })\n\n    // Close popover to silence act() warning\n    fireEvent.click(document)\n  })\n\n  const detailOptions = [{ detail: 'Info about option', value: 'someValue' }]\n  test.each([\n    [\n      'Select',\n      <Select placeholder=\"Search\" options={detailOptions} key=\"select\" />,\n    ],\n    [\n      'SelectMulti',\n      <SelectMulti\n        placeholder=\"Search\"\n        options={detailOptions}\n        key=\"select-multi\"\n      />,\n    ],\n  ])('option detail (%s)', (_, jsx) => {\n    renderWithTheme(jsx)\n    const input = screen.getByPlaceholderText('Search')\n    fireEvent.mouseDown(input)\n    expect(screen.getByText('Info about option')).toBeVisible()\n\n    // Close popover to silence act() warning\n    fireEvent.click(document)\n  })\n\n  describe('no options', () => {\n    test.each([\n      [\n        'Select',\n        (onChange: () => void) => (\n          <Select placeholder=\"Search\" onChange={onChange} key=\"select\" />\n        ),\n      ],\n      [\n        'SelectMulti',\n        (onChange: () => void) => (\n          <SelectMulti\n            placeholder=\"Search\"\n            onChange={onChange}\n            key=\"select-multi\"\n          />\n        ),\n      ],\n    ])('label does nothing when clicked (%s)', (_, getJSX) => {\n      const handleChange = jest.fn()\n      renderWithTheme(getJSX(handleChange))\n\n      const input = screen.getByPlaceholderText('Search')\n\n      fireEvent.mouseDown(input)\n\n      const noOptions = screen.getByText('No options')\n      fireEvent.click(noOptions)\n\n      expect(handleChange).not.toHaveBeenCalled()\n\n      // Close popover to silence act() warning\n      fireEvent.click(document)\n    })\n\n    const label = 'Your search returned no results'\n    test.each([\n      [\n        'Select',\n        <Select placeholder=\"Search\" noOptionsLabel={label} key=\"select\" />,\n      ],\n      [\n        'SelectMulti',\n        <SelectMulti\n          placeholder=\"Search\"\n          noOptionsLabel={label}\n          key=\"select-multi\"\n        />,\n      ],\n    ])('custom label text (%s)', (_, jsx) => {\n      renderWithTheme(jsx)\n\n      const input = screen.getByPlaceholderText('Search')\n      fireEvent.mouseDown(input)\n\n      const noOptions = screen.queryByText(label)\n      expect(noOptions).toBeVisible()\n\n      // Close popover to silence act() warning\n      fireEvent.click(document)\n    })\n    test.each([\n      ['Select', <Select placeholder=\"Search\" isLoading key=\"select\" />],\n      [\n        'SelectMulti',\n        <SelectMulti placeholder=\"Search\" isLoading key=\"select-multi\" />,\n      ],\n    ])('isLoading (%s)', (_, jsx) => {\n      renderWithTheme(jsx)\n\n      const input = screen.getByPlaceholderText('Search')\n\n      fireEvent.mouseDown(input)\n\n      const spinner = screen.queryByLabelText('Loading')\n      expect(spinner).toBeVisible()\n\n      // Close popover to silence act() warning\n      fireEvent.click(document)\n    })\n  })\n\n  describe('windowed options', () => {\n    const testArray: Array<\n      [string, (longOptions: SelectOptionProps[]) => JSX.Element]\n    > = [\n      [\n        'Select',\n        longOptions => (\n          <Select placeholder=\"Search\" options={longOptions} key=\"select\" />\n        ),\n      ],\n      [\n        'SelectMulti',\n        longOptions => (\n          <SelectMulti\n            placeholder=\"Search\"\n            options={longOptions}\n            key=\"select-multi\"\n          />\n        ),\n      ],\n    ]\n\n    test.each(testArray)('100 options do not all render (%s)', (_, getJSX) => {\n      const longOptions = Array.from(Array(100), (_, index) => ({\n        value: `${index}`,\n      }))\n      renderWithTheme(getJSX(longOptions))\n\n      const input = screen.getByPlaceholderText('Search')\n      fireEvent.mouseDown(input)\n\n      expect(screen.getByText('0')).toBeInTheDocument()\n      expect(screen.getByText('5')).toBeInTheDocument()\n      // js-dom doesn't do layout so only the first option + 5 buffer are rendered\n      expect(screen.queryByText('6')).not.toBeInTheDocument()\n\n      // Close popover to silence act() warning\n      fireEvent.click(document)\n    })\n\n    test.each(testArray)(\n      '100 grouped options do not all render (%s)',\n      (_, getJSX) => {\n        const longOptions = Array.from(Array(100), (_, index) => ({\n          value: `${index}`,\n        }))\n        const groupedOptions = [\n          { label: 'First', options: longOptions.slice(0, 4) },\n          { label: 'Second', options: longOptions.slice(4, 20) },\n          { label: 'Third', options: longOptions.slice(20, 99) },\n        ]\n        renderWithTheme(getJSX(groupedOptions))\n\n        const inputs = screen.getAllByRole('textbox')\n        // SelectMulti has a hidden input\n        const input = inputs[inputs.length - 1]\n        fireEvent.mouseDown(input)\n\n        expect(screen.getByText('First')).toBeInTheDocument()\n        expect(screen.getByText('3')).toBeInTheDocument()\n        // js-dom doesn't do layout so only the first divider (hidden), group header\n        // and 4 options are rendered\n        expect(screen.queryByText('4')).not.toBeInTheDocument()\n        // Close popover to silence act() warning\n        fireEvent.click(document)\n      }\n    )\n\n    test.each(testArray)(\n      'Hover navigation is off while scrolling (%s)',\n      (_, getJSX) => {\n        jest.useFakeTimers()\n\n        const rafSpy = jest\n          .spyOn(window, 'requestAnimationFrame')\n          .mockImplementation((cb: any) => cb())\n\n        renderWithTheme(getJSX(options))\n\n        const input = screen.getByPlaceholderText('Search')\n        fireEvent.mouseDown(input)\n\n        // hover will not trigger navigate during & right after scroll\n        const surface = screen.getByRole('dialog')\n        expect(surface).toBeInTheDocument()\n        const surfaceInner = surface && surface.firstChild\n        expect(surfaceInner).toBeInTheDocument()\n        const surfaceInnerFlex = surfaceInner && surfaceInner.firstChild\n        expect(surfaceInnerFlex).toBeInTheDocument()\n        surfaceInnerFlex && fireEvent.scroll(surfaceInnerFlex)\n\n        const bar = screen.getByText('BAR')\n        fireEvent.mouseOver(bar)\n        expect(\n          screen.queryByRole('option', { selected: true })\n        ).not.toBeInTheDocument()\n\n        // hover will trigger navigate after timeout\n        jest.runOnlyPendingTimers()\n\n        fireEvent.mouseOver(bar)\n        expect(\n          screen.queryByRole('option', { selected: true })\n        ).toHaveTextContent('BAR')\n\n        // Close popover to silence act() warning\n        fireEvent.click(document)\n\n        runTimers()\n\n        rafSpy.mockRestore()\n      }\n    )\n\n    test.each(testArray)('99 options all render (%s)', (_, getJSX) => {\n      const longOptions = Array.from(Array(99), (_, index) => ({\n        value: `${index}`,\n      }))\n      renderWithTheme(getJSX(longOptions))\n\n      const input = screen.getByPlaceholderText('Search')\n      fireEvent.mouseDown(input)\n\n      expect(screen.getByText('0')).toBeInTheDocument()\n      expect(screen.getByText('98')).toBeInTheDocument()\n\n      // Close popover to silence act() warning\n      fireEvent.click(document)\n    })\n\n    const label = 'Your search returned no results'\n    test.each([\n      [\n        'Select',\n        <Select placeholder=\"Search\" noOptionsLabel={label} key=\"select\" />,\n      ],\n      [\n        'SelectMulti',\n        <SelectMulti\n          placeholder=\"Search\"\n          noOptionsLabel={label}\n          key=\"select-multi\"\n        />,\n      ],\n    ])('custom label text (%s)', (_, jsx) => {\n      renderWithTheme(jsx)\n\n      const input = screen.getByPlaceholderText('Search')\n      fireEvent.mouseDown(input)\n\n      const noOptions = screen.queryByText(label)\n      expect(noOptions).toBeVisible()\n\n      // Close popover to silence act() warning\n      fireEvent.click(document)\n    })\n  })\n\n  describe('showCreate', () => {\n    const commonProps = {\n      isFilterable: true,\n      placeholder: 'Search',\n      showCreate: true,\n    }\n    test.each([\n      [\n        'Select',\n        <Select defaultValue=\"test value\" {...commonProps} key=\"select\" />,\n      ],\n      [\n        'SelectMulti',\n        <SelectMulti\n          defaultValues={['test value']}\n          {...commonProps}\n          key=\"select-multi\"\n        />,\n      ],\n    ])('create option replaces \"No options\" (%s)', (_, jsx) => {\n      renderWithTheme(jsx)\n\n      const input = screen.getByPlaceholderText('Search')\n      fireEvent.focus(input)\n      fireEvent.change(input, { target: { value: 'some text' } })\n\n      expect(screen.getByText('Create \"some text\"')).toBeVisible()\n      expect(screen.queryByText('No options')).not.toBeInTheDocument()\n\n      fireEvent.focus(input)\n      fireEvent.change(input, { target: { value: 'test value' } })\n\n      // create option doesn't show if inputValue is already in current values\n      expect(screen.getByText('No options')).toBeVisible()\n      expect(screen.queryByText('Create \"test value\"')).not.toBeInTheDocument()\n\n      fireEvent.focus(input)\n      fireEvent.change(input, { target: { value: '' } })\n\n      // No options should show if there are no options AND no input value\n      expect(screen.getByText('No options')).toBeVisible()\n      expect(screen.queryByText('Create \"\"')).not.toBeInTheDocument()\n\n      // Close popover to silence act() warning\n      fireEvent.click(document)\n    })\n\n    const formatCreateLabel = (inputValue: string) =>\n      `${inputValue} CREATE LABEL`\n    test.each([\n      [\n        'Select',\n        <Select\n          options={options}\n          {...commonProps}\n          formatCreateLabel={formatCreateLabel}\n          key=\"select\"\n        />,\n      ],\n      [\n        'SelectMulti',\n        <SelectMulti\n          options={options}\n          {...commonProps}\n          formatCreateLabel={formatCreateLabel}\n          key=\"select-multi\"\n        />,\n      ],\n    ])('custom label, checks options (%s)', (_, jsx) => {\n      renderWithTheme(jsx)\n\n      const input = screen.getByPlaceholderText('Search')\n      fireEvent.focus(input)\n      fireEvent.change(input, { target: { value: 'some text' } })\n\n      expect(screen.getByText('some text CREATE LABEL')).toBeVisible()\n\n      fireEvent.focus(input)\n      fireEvent.change(input, { target: { value: 'foo' } })\n\n      // create option doesn't show if inputValue is in options\n      expect(screen.queryByText('foo CREATE LABEL')).not.toBeInTheDocument()\n      // Close popover to silence act() warning\n      fireEvent.click(document)\n    })\n  })\n\n  test.each([\n    [\n      'Select',\n      (value: string, onChange: (value: string) => void) => (\n        <Select\n          options={options}\n          placeholder=\"Search\"\n          value={value}\n          onChange={onChange}\n          key=\"select\"\n        />\n      ),\n    ],\n    [\n      'SelectMulti',\n      (value: string, onChange: (value: string) => void) => (\n        <SelectMulti\n          options={options}\n          placeholder=\"Search\"\n          values={[value]}\n          onChange={(values?: string[]) =>\n            onChange(values && values.length ? values[0] : '')\n          }\n          key=\"select-multi\"\n        />\n      ),\n    ],\n  ])('with controlled delayed update (%s)', (_, getJSX) => {\n    function Component() {\n      const [value, setValue] = useState('BAR')\n      const [tempValue, setTempValue] = useState(value)\n      useEffect(() => {\n        const t = setTimeout(() => {\n          setValue(tempValue)\n        }, 0)\n        return () => {\n          clearTimeout(t)\n        }\n      }, [tempValue])\n\n      return getJSX(value, setTempValue)\n    }\n\n    renderWithTheme(<Component />)\n    const input = screen.getByPlaceholderText('Search')\n    fireEvent.mouseDown(input)\n    const option = screen.getByText('FOO')\n    fireEvent.blur(input, { relatedTarget: option })\n    fireEvent.click(option)\n\n    expect(input).toHaveFocus()\n\n    runTimers()\n\n    // Close popover to silence act() warning\n    fireEvent.click(document)\n  })\n})\n\ndescribe('Select', () => {\n  const globalConsole = global.console\n  const warnMock = jest.fn()\n\n  beforeEach(() => {\n    global.console = ({\n      warn: warnMock,\n    } as unknown) as Console\n  })\n\n  afterEach(() => {\n    jest.resetAllMocks()\n    global.console = globalConsole\n  })\n\n  const options = [\n    { label: 'Foo', value: 'FOO' },\n    { label: 'Bar', value: 'BAR' },\n  ]\n\n  test('value', () => {\n    renderWithTheme(\n      <Select\n        options={options}\n        placeholder=\"Search\"\n        value=\"BAR\"\n        onChange={jest.fn()}\n      />\n    )\n\n    const input = screen.getByPlaceholderText('Search')\n    // should not default to first option\n    expect(input).toHaveValue('Bar')\n    // verify that clear all icon button is not show (isClearable not set)\n    expect(screen.queryByRole('button')).not.toBeInTheDocument()\n  })\n\n  test('clearing the value externally', () => {\n    const Component = () => {\n      const [value, setValue] = useState('FOO')\n      return (\n        <>\n          <Button onClick={() => setValue('')}>Clear</Button>\n          <Select value={value} onChange={setValue} options={options} />\n        </>\n      )\n    }\n    renderWithTheme(<Component />)\n\n    const input = screen.getByDisplayValue('Foo')\n    const button = screen.getByText('Clear')\n\n    fireEvent.click(button)\n    expect(input).not.toHaveValue()\n  })\n\n  test('defaultValue', () => {\n    renderWithTheme(\n      <Select options={options} placeholder=\"Search\" defaultValue=\"BAR\" />\n    )\n\n    const input = screen.getByPlaceholderText('Search')\n    // should not default to first option\n    expect(input).toHaveValue('Bar')\n  })\n\n  test('isClearable', () => {\n    const handleChange = jest.fn()\n    renderWithTheme(\n      <Select\n        options={options}\n        placeholder=\"Search\"\n        defaultValue=\"BAR\"\n        onChange={handleChange}\n        isClearable\n      />\n    )\n\n    const input = screen.getByPlaceholderText('Search')\n    expect(input).toHaveValue('Bar')\n\n    const clearButton = screen.getByRole('button')\n    fireEvent.click(clearButton)\n\n    expect(input).not.toHaveValue()\n    expect(handleChange).toHaveBeenCalledWith('')\n  })\n\n  test('placeholder, no defaultValue', () => {\n    const options = [{ value: 'FOO' }, { value: 'BAR' }]\n    renderWithTheme(<Select options={options} placeholder=\"Search\" />)\n\n    const input = screen.getByPlaceholderText('Search')\n    // should not default to first option\n    expect(input).not.toHaveValue()\n  })\n\n  test('isClearable, no defaultValue', () => {\n    renderWithTheme(\n      <Select options={options} isClearable data-testid=\"wrapper\" />\n    )\n\n    const input = screen.getByTestId('wrapper').querySelector('input')\n    // should not default to first option\n    expect(input).not.toHaveValue()\n  })\n\n  test('empty string defaultValue', () => {\n    renderWithTheme(\n      <Select options={options} defaultValue=\"\" data-testid=\"wrapper\" />\n    )\n\n    const input = screen.getByTestId('wrapper').querySelector('input')\n    // should not default to first option\n    expect(input).not.toHaveValue()\n  })\n\n  test('empty string value', () => {\n    renderWithTheme(<Select options={options} value=\"\" data-testid=\"wrapper\" />)\n\n    const input = screen.getByTestId('wrapper').querySelector('input')\n    // should not default to first option\n    expect(input).not.toHaveValue()\n  })\n\n  test('empty string value, empty string option', () => {\n    renderWithTheme(\n      <Select\n        options={[{ label: 'An empty string', value: '' }, ...options]}\n        value=\"\"\n        data-testid=\"wrapper\"\n      />\n    )\n\n    const input = screen.getByTestId('wrapper').querySelector('input')\n    // should not default to first option\n    expect(input).toHaveValue('An empty string')\n  })\n\n  test('default to first option', () => {\n    renderWithTheme(<Select options={options} data-testid=\"wrapper\" />)\n\n    const input = screen.getByTestId('wrapper').querySelector('input')\n    // should default to first option\n    expect(input).toHaveValue('Foo')\n  })\n\n  test('displayed value changes when option label changes', () => {\n    const Component = () => {\n      const [label, setLabel] = useState('Original Label')\n      const options = [\n        { label, value: 'value_stays_the_same' },\n        { label: 'Another Option', value: 'other' },\n      ]\n      return (\n        <>\n          <Button onClick={() => setLabel('Updated label')}>\n            Update label\n          </Button>\n          <Select value=\"value_stays_the_same\" options={options} />\n        </>\n      )\n    }\n    renderWithTheme(<Component />)\n\n    const input = screen.getByDisplayValue('Original Label')\n    fireEvent.click(input)\n    expect(getAllComboboxOptionText()).toMatchInlineSnapshot(`\n      Array [\n        \"Original Label\",\n        \"Another Option\",\n      ]\n    `)\n    // Close list\n    fireEvent.click(document)\n\n    fireEvent.click(screen.getByText('Update label'))\n    expect(input).toHaveValue('Updated label')\n\n    fireEvent.click(input)\n    expect(getAllComboboxOptionText()).toMatchInlineSnapshot(`\n      Array [\n        \"Updated label\",\n        \"Another Option\",\n      ]\n    `)\n\n    // Close popover to silence act() warning\n    fireEvent.click(document)\n  })\n\n  test('filtering out the selected option does not trigger a change', () => {\n    // Tests a bug where as soon as the selected option gets filtered out,\n    // the input value reverts to the current value\n    const Component = () => {\n      const [filterTerm, setFilterTerm] = useState('')\n      const filteredOptions = useMemo(\n        () => options.filter(option => option.label.indexOf(filterTerm) > -1),\n        [filterTerm]\n      )\n      return (\n        <Select\n          value=\"FOO\"\n          options={filteredOptions}\n          isFilterable\n          onFilter={setFilterTerm}\n        />\n      )\n    }\n    renderWithTheme(<Component />)\n\n    const input = screen.getByDisplayValue('Foo')\n    fireEvent.change(input, { target: { value: 'Ba' } })\n    expect(input).toHaveValue('Ba')\n\n    // Close popover to silence act() warning\n    fireEvent.click(document)\n  })\n\n  test('option icons', () => {\n    renderWithTheme(\n      <Select\n        placeholder=\"Select a visualization\"\n        options={[\n          {\n            icon: <AutoGraph data-testid=\"input-icon\" />,\n            label: 'Bar',\n            value: 'bar',\n          },\n          { label: 'No Icon', value: 'noicon' },\n          {\n            icon: <BarChart data-testid=\"input-icon\" />,\n            indicator: 'Test Indicator',\n            label: 'Column',\n            value: 'column',\n          },\n          {\n            icon: <>cool icon</>,\n            label: 'Custom Icon',\n            value: 'custom',\n          },\n        ]}\n      />\n    )\n\n    expect(screen.queryByTestId('input-icon')).not.toBeInTheDocument()\n\n    const input = screen.getByPlaceholderText('Select a visualization')\n    expect(input).toBeInTheDocument()\n    fireEvent.click(input)\n    expect(screen.getAllByTestId('input-icon')).toHaveLength(2)\n    expect(screen.getByTestId('option-icon-placeholder')).toBeInTheDocument()\n\n    fireEvent.click(screen.getByText('Column'))\n    const inputIcon = screen.getByTestId('input-icon')\n    expect(inputIcon.tagName).toBe('svg')\n\n    fireEvent.click(input)\n    fireEvent.click(screen.getByText('Custom Icon'))\n    expect(screen.getByText('cool icon')).toBeInTheDocument()\n\n    // Test icon+indicator warning\n    expect(screen.queryByText('Test Indicator')).not.toBeInTheDocument()\n    expect(warnMock.mock.calls).toMatchInlineSnapshot(`\n      Array [\n        Array [\n          \"Use icon or indicator but not both at the same time.\",\n        ],\n        Array [\n          \"Use icon or indicator but not both at the same time.\",\n        ],\n      ]\n    `)\n\n    // Close popover to silence act() warning\n    fireEvent.click(document)\n  })\n\n  test('option preface', () => {\n    renderWithTheme(\n      <Select\n        placeholder=\"Search\"\n        options={[\n          { label: 'Foo', preface: 'Preface for Foo', value: 'FOO' },\n          {\n            label: 'Bar',\n            preface: (\n              <>\n                <strong>Preface for</strong> Bar\n              </>\n            ),\n            value: 'BAR',\n          },\n        ]}\n      />\n    )\n\n    const input = screen.getByPlaceholderText('Search')\n    fireEvent.click(input)\n    const fooPreface = screen.getByText('Preface for Foo')\n    const barPreface = screen.getByText('Preface for')\n    expect(fooPreface).toBeVisible()\n    expect(barPreface).toBeVisible()\n    expect(barPreface.parentElement).toHaveTextContent('Preface for Bar')\n\n    fireEvent.click(fooPreface)\n    expect(input).toHaveDisplayValue('Foo')\n\n    // Close popover to silence act() warning\n    fireEvent.click(document)\n  })\n\n  test('filtering after selecting an option where value != label', () => {\n    const customLabelOptions = [\n      { label: 'Foo', value: 'FOO' },\n      { label: 'Bar', value: 'BAR' },\n    ]\n    function TestComponent() {\n      const [filterTerm, setFilterTerm] = useState('')\n      const [value, setValue] = useState('')\n      // Just need to simulate the current option being filtered out\n      const filteredOptions = filterTerm === '' ? customLabelOptions : []\n      return (\n        <Select\n          options={filteredOptions}\n          value={value}\n          onChange={setValue}\n          isFilterable\n          onFilter={setFilterTerm}\n          placeholder=\"Search\"\n        />\n      )\n    }\n\n    renderWithTheme(<TestComponent />)\n\n    const input = screen.getByPlaceholderText('Search')\n    fireEvent.click(input)\n    fireEvent.click(screen.getByText('Foo'))\n    expect(input).toHaveDisplayValue('Foo')\n\n    fireEvent.focus(input)\n    fireEvent.change(input, { target: { value: 'Testing' } })\n    expect(input).toHaveDisplayValue('Testing')\n\n    // Close popover to silence act() warning\n    fireEvent.click(document)\n  })\n\n  // Test for the \"No options\" bug\n  test('filtering a windowed list then deleting the filter', () => {\n    function Component() {\n      const [optionsToUse, setOptions] = useState(options100)\n      function handleFilter(term: string) {\n        setOptions(options100.filter(option => option.value.indexOf(term) > -1))\n      }\n      return (\n        <Select\n          options={optionsToUse}\n          placeholder=\"Search\"\n          onFilter={handleFilter}\n          value=\"\"\n        />\n      )\n    }\n\n    renderWithTheme(<Component />)\n\n    const input = screen.getByPlaceholderText('Search')\n    fireEvent.mouseDown(input)\n    fireEvent.change(input, { target: { value: '90' } })\n    // Must delete filter before navigating for bug to show up\n    fireEvent.change(input, { target: { value: '' } })\n    expect(screen.queryByText('No options')).not.toBeInTheDocument()\n\n    fireEvent.click(document)\n  })\n})\n"],"mappings":"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"}