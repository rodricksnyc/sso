{"version":3,"file":"SelectMulti.spec.js","names":["beforeEach","jest","useFakeTimers","afterEach","runOnlyPendingTimers","useRealTimers","runTimers","act","cleanup","basicOptions","label","value","describe","test","renderWithTheme","fireEvent","click","screen","getByPlaceholderText","select","getByText","closest","expect","not","toHaveClass","toHaveStyle","focus","mouseDown","mouseUp","blur","document","options","fn","toBeVisible","getAllByRole","toHaveLength","TestComponent","React","useState","values","setValues","handleFilter","input","change","target","toHaveValue","cheeses","term","setTerm","useMemo","filter","cheese","toUpperCase","indexOf","bar","getAllByText","queryByText","toBeInTheDocument","keyDown","key","onChangeMock","toHaveBeenCalled","toHaveBeenCalledWith","getByRole","queryByRole","hiddenInput","getByTestId","metaKey","toHaveDisplayValue","firePasteEvent"],"sources":["../../../../../src/Form/Inputs/Select/SelectMulti.spec.tsx"],"sourcesContent":["/*\n\n MIT License\n\n Copyright (c) 2022 Looker Data Sciences, Inc.\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n\n */\n\nimport { firePasteEvent, renderWithTheme } from '@looker/components-test-utils'\nimport { act, cleanup, fireEvent, screen } from '@testing-library/react'\nimport React from 'react'\n\nimport { SelectMulti } from './SelectMulti'\n\nbeforeEach(() => {\n  jest.useFakeTimers()\n})\n\nafterEach(() => {\n  jest.runOnlyPendingTimers()\n  jest.useRealTimers()\n})\n\nconst runTimers = () =>\n  act(() => {\n    jest.runOnlyPendingTimers()\n  })\n\nafterEach(cleanup)\n\nconst basicOptions = [\n  { label: 'Foo', value: 'FOO' },\n  { label: 'Bar', value: 'BAR' },\n]\n\ndescribe('SelectMulti', () => {\n  test('ripple effect', () => {\n    renderWithTheme(\n      <SelectMulti\n        options={[\n          { label: 'Cheddar', value: 'cheddar' },\n          { label: 'Gouda', value: 'gouda' },\n          { label: 'Swiss', value: 'swiss' },\n        ]}\n        placeholder=\"SelectMulti\"\n      ></SelectMulti>\n    )\n\n    fireEvent.click(screen.getByPlaceholderText('SelectMulti'))\n\n    const select = screen.getByText('Cheddar').closest('li')\n    expect(select).not.toHaveClass('bg-on fg-in')\n    expect(select).toHaveStyle({\n      '--ripple-color': '#71767a',\n      '--ripple-scale-end': '1',\n      '--ripple-scale-start': '0.1',\n      '--ripple-size': '100%',\n      '--ripple-translate': '0, 0',\n    })\n\n    select && fireEvent.focus(select)\n    expect(select).toHaveClass('bg-on')\n\n    select && fireEvent.mouseDown(select)\n    expect(select).toHaveClass('bg-on fg-in')\n\n    // foreground is locked for a minimum time to animate the ripple\n    select && fireEvent.mouseUp(select)\n    runTimers()\n    expect(select).toHaveClass('bg-on fg-out')\n    runTimers()\n    expect(select).toHaveClass('bg-on')\n\n    select && fireEvent.blur(select)\n    expect(select).not.toHaveClass('bg-on fg-in')\n    fireEvent.click(document)\n  })\n  test('values', () => {\n    const options = [\n      { label: 'Foo', value: 'FOO' },\n      { label: 'Bar', value: 'BAR' },\n      { label: 'Baz', value: 'BAZ' },\n      { label: 'Qux', value: 'QUX' },\n    ]\n    renderWithTheme(\n      <SelectMulti\n        options={options}\n        placeholder=\"Search\"\n        values={['BAZ', 'FOO']}\n        onChange={jest.fn()}\n      />\n    )\n    // should already have the 2 chips\n    expect(screen.getByText('Baz')).toBeVisible()\n    expect(screen.getByText('Foo')).toBeVisible()\n    // 2 chip remove buttons and 1 clear all button\n    expect(screen.getAllByRole('button')).toHaveLength(3)\n  })\n\n  test('defaultValues', () => {\n    const options = [\n      { label: 'Foo', value: 'FOO' },\n      { label: 'Bar', value: 'BAR' },\n      { label: 'Baz', value: 'BAZ' },\n      { label: 'Qux', value: 'QUX' },\n    ]\n    renderWithTheme(\n      <SelectMulti\n        options={options}\n        placeholder=\"Search\"\n        defaultValues={['BAR']}\n      />\n    )\n    // should already have the chip\n    expect(screen.getByText('Bar')).toBeVisible()\n    // 1 chip remove button and 1 clear all button\n    expect(screen.getAllByRole('button')).toHaveLength(2)\n  })\n\n  test('controlled value & context mismatch', () => {\n    const TestComponent = () => {\n      const [values, setValues] = React.useState<string[] | undefined>(['FOO'])\n      const handleFilter = () => {\n        // Contrived example to test how the component handles \"unexpected\" values\n        // i.e. the values prop is different from the values in context\n        // Tests a bug fix where the input value was getting lost (SELECT_SILENT)\n        setValues([])\n      }\n      return (\n        <SelectMulti\n          values={values}\n          onChange={setValues}\n          options={basicOptions}\n          isFilterable\n          onFilter={handleFilter}\n          placeholder=\"Search\"\n        />\n      )\n    }\n    renderWithTheme(<TestComponent />)\n    const input = screen.getByPlaceholderText('Search')\n    fireEvent.change(input, { target: { value: 'b' } })\n    expect(input).toHaveValue('b')\n\n    fireEvent.click(document)\n  })\n\n  test('controlled, filterable', () => {\n    const cheeses = [\n      { value: 'Cheddar' },\n      { value: 'Gouda' },\n      { value: 'Swiss' },\n      { value: 'Feta' },\n      { value: 'Mascarpone' },\n      { value: 'Brie' },\n      { value: 'Mozzarella' },\n      { value: 'Cotija' },\n      { value: 'Pepperjack' },\n    ]\n\n    const TestComponent = () => {\n      const [values, setValues] = React.useState<string[] | undefined>([\n        'Cheddar',\n      ])\n      const [term, setTerm] = React.useState('')\n\n      const options = React.useMemo(() => {\n        if (term === '') return cheeses\n        return cheeses.filter(\n          cheese => cheese.value.toUpperCase().indexOf(term.toUpperCase()) > -1\n        )\n      }, [term])\n      return (\n        <SelectMulti\n          values={values}\n          onChange={setValues}\n          options={options}\n          isFilterable\n          onFilter={setTerm}\n          placeholder=\"Search\"\n        />\n      )\n    }\n\n    renderWithTheme(<TestComponent />)\n    const input = screen.getByPlaceholderText('Search')\n    fireEvent.change(input, { target: { value: 'z' } })\n    // Tests a bug fix with the controlled value behavior where SELECT_SILENT\n    // was incorrectly triggered b/c the context value had '' for label\n    // when the selected option is filtered out (faulty logic in getComboboxText)\n    expect(input).toHaveValue('z')\n\n    fireEvent.click(document)\n  })\n})\n\ndescribe('closeOnSelect', () => {\n  test('false by default', () => {\n    renderWithTheme(<SelectMulti options={basicOptions} placeholder=\"Search\" />)\n\n    const input = screen.getByPlaceholderText('Search')\n    fireEvent.mouseDown(input)\n\n    const bar = screen.getByText('Bar')\n\n    expect(screen.getByText('Foo')).toBeVisible()\n    expect(bar).toBeVisible()\n\n    fireEvent.click(bar)\n\n    expect(screen.getByText('Foo')).toBeVisible()\n    expect(screen.getAllByText('Bar')).toHaveLength(2)\n\n    fireEvent.click(document)\n  })\n\n  test('true', () => {\n    renderWithTheme(\n      <SelectMulti options={basicOptions} placeholder=\"Search\" closeOnSelect />\n    )\n\n    const input = screen.getByPlaceholderText('Search')\n    fireEvent.mouseDown(input)\n\n    const bar = screen.getByText('Bar')\n\n    expect(screen.getByText('Foo')).toBeVisible()\n    expect(bar).toBeVisible()\n\n    fireEvent.click(bar)\n    // Bar is now a chip\n    expect(screen.getByText('Bar')).toBeVisible()\n    // list has closed\n    expect(screen.queryByText('Foo')).not.toBeInTheDocument()\n\n    fireEvent.click(document)\n  })\n\n  describe('removeOnBackspace', () => {\n    test('true by default', () => {\n      renderWithTheme(\n        <SelectMulti\n          options={basicOptions}\n          defaultValues={['FOO', 'BAR']}\n          placeholder=\"Search\"\n        />\n      )\n\n      const input = screen.getByPlaceholderText('Search')\n\n      expect(screen.getByText('Foo')).toBeVisible()\n      expect(screen.getByText('Bar')).toBeVisible()\n\n      fireEvent.keyDown(input, {\n        key: 'Backspace',\n      })\n\n      expect(screen.getByText('Foo')).toBeVisible()\n      expect(screen.queryByText('Bar')).not.toBeInTheDocument()\n    })\n\n    test('false', () => {\n      renderWithTheme(\n        <SelectMulti\n          options={basicOptions}\n          defaultValues={['FOO', 'BAR']}\n          placeholder=\"Search\"\n          removeOnBackspace={false}\n        />\n      )\n\n      const input = screen.getByPlaceholderText('Search')\n\n      expect(screen.getByText('Foo')).toBeVisible()\n      expect(screen.getByText('Bar')).toBeVisible()\n\n      fireEvent.keyDown(input, {\n        key: 'Backspace',\n      })\n\n      expect(screen.getByText('Foo')).toBeVisible()\n      expect(screen.queryByText('Bar')).toBeVisible()\n    })\n  })\n\n  describe('freeInput', () => {\n    test('false by default', () => {\n      const onChangeMock = jest.fn()\n      renderWithTheme(\n        <SelectMulti\n          options={basicOptions}\n          defaultValues={['FOO', 'BAR']}\n          placeholder=\"Search\"\n          onChange={onChangeMock}\n        />\n      )\n\n      const input = screen.getByPlaceholderText('Search')\n      fireEvent.change(input, { target: { value: 'baz,qux,' } })\n\n      expect(onChangeMock).not.toHaveBeenCalled()\n      expect(input).toHaveValue('baz,qux,')\n\n      fireEvent.click(document)\n    })\n\n    test('true', () => {\n      const onChangeMock = jest.fn()\n      renderWithTheme(\n        <SelectMulti\n          options={basicOptions}\n          defaultValues={['FOO', 'BAR']}\n          placeholder=\"Search\"\n          onChange={onChangeMock}\n          freeInput\n        />\n      )\n\n      const input = screen.getByPlaceholderText('Search')\n\n      // Whitespace trimmed by default\n      fireEvent.change(input, { target: { value: ' baz , qux,' } })\n\n      expect(onChangeMock).toHaveBeenCalledWith(['FOO', 'BAR', 'baz', 'qux'])\n      expect(input).toHaveValue('')\n\n      fireEvent.click(document)\n    })\n\n    test('formatInputValue false', () => {\n      const onChangeMock = jest.fn()\n      renderWithTheme(\n        <SelectMulti\n          options={basicOptions}\n          defaultValues={['FOO', 'BAR']}\n          placeholder=\"Search\"\n          onChange={onChangeMock}\n          freeInput\n          formatInputValue={false}\n        />\n      )\n\n      const input = screen.getByPlaceholderText('Search')\n      fireEvent.change(input, { target: { value: ' baz , qux,' } })\n\n      expect(onChangeMock).toHaveBeenCalledWith(['FOO', 'BAR', ' baz ', ' qux'])\n      expect(input).toHaveValue('')\n\n      fireEvent.click(document)\n    })\n\n    test('creates value and closes list on blur', async () => {\n      const onChangeMock = jest.fn()\n      renderWithTheme(\n        <>\n          <button>A random button</button>\n          <SelectMulti\n            options={basicOptions}\n            placeholder=\"Search\"\n            onChange={onChangeMock}\n            freeInput\n          />\n        </>\n      )\n\n      const input = screen.getByPlaceholderText('Search')\n      input.focus()\n      fireEvent.change(input, { target: { value: 'baz' } })\n      expect(screen.getByRole('listbox')).toBeVisible()\n      screen.getByText('A random button').focus()\n\n      expect(onChangeMock).toHaveBeenCalledWith(['baz'])\n      expect(input).toHaveValue('')\n\n      expect(screen.queryByRole('listbox')).not.toBeInTheDocument()\n    })\n\n    test('copy/paste', () => {\n      const onChangeMock = jest.fn()\n      renderWithTheme(\n        <SelectMulti\n          options={basicOptions}\n          values={['FOO', 'BAR']}\n          onChange={onChangeMock}\n          placeholder=\"Search\"\n          freeInput\n        />\n      )\n\n      const input = screen.getByPlaceholderText('Search')\n      const hiddenInput = screen.getByTestId('hidden-input')\n\n      fireEvent.keyDown(input, { key: 'a', metaKey: true })\n      // testing the hidden input value b/c jsdom do clipboard\n      expect(hiddenInput).toHaveDisplayValue(\n        '[{\"label\":\"Foo\",\"value\":\"FOO\"},{\"label\":\"Bar\",\"value\":\"BAR\"}]'\n      )\n\n      firePasteEvent(\n        input,\n        '[{\"label\":\"Baz\",\"value\":\"BAZ\"},{\"label\":\"Qux\",\"value\":\"QUX\"}]'\n      )\n      fireEvent.change(input, {\n        target: {\n          value:\n            '[{\"label\":\"Baz\",\"value\":\"BAZ\"},{\"label\":\"Qux\",\"value\":\"QUX\"}]',\n        },\n      })\n      expect(onChangeMock).toHaveBeenCalledWith(['FOO', 'BAR', 'BAZ', 'QUX'])\n    })\n  })\n})\n"],"mappings":"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"}