import "core-js/modules/es.array.map.js";
import "core-js/modules/es.array.for-each.js";
import "core-js/modules/web.dom-collections.for-each.js";
import { buildPivotMeasureName, getDimensionNames, getMeasureNames } from '.';
export var tabularPivotResponse = function tabularPivotResponse(_ref) {
  var data = _ref.data,
      fields = _ref.fields,
      pivots = _ref.pivots;
  return data.map(function (datum) {
    var formattedDatum = {};
    var dimensionNames = getDimensionNames(fields);
    dimensionNames.forEach(function (dimensionName) {
      return formattedDatum[dimensionName] = datum[dimensionName] && datum[dimensionName].value;
    });
    var measureNames = getMeasureNames(fields);
    measureNames.forEach(function (measureName) {
      var pivotValues = pivots.map(function (pivot) {
        return pivot.key;
      });
      pivotValues.forEach(function (pivotValue) {
        formattedDatum[buildPivotMeasureName({
          measureName: measureName,
          pivotValue: pivotValue
        })] = datum[measureName] && datum[measureName][pivotValue].value;
      });
    });
    return formattedDatum;
  });
};
//# sourceMappingURL=tabularPivotResponse.js.map